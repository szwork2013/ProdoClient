<!--/*
* Overview: comment Template
* Its a comment template which displays comments
* Dated: 29/10/2013.
* Author: Bhagyashri Jangam
* Copyright: Prodonus Software Private Limited and GiantLeap Systems Private Limited 2013
* Change History:
*
* date | author | description 
*
* 27-3/2013 | xyx | Add a new property
* 
*/-->

<li  id="prodo-comment-media"  class="media list-animate-item" ng-repeat="comment in productComments | filter:{commenttext:search}" >

   <!--  <a class="pull-left" href="#">
        <img class="media-object" id="img-user" style="height:60px; width:50px" ng-src="{{comment.user.profilepic}}" alt="User"/> 
      </a> -->

 

      <a class="pull-left" href="#"  ng-click="userProfileModal(comment.user.userid)" ng-controller="prodoUserProfileDataController"  id="triggerModal">

      <img class="media-object" id="img-user" ng-src="{{comment.user.profilepic}}" alt="User"  style="height:50px; width:50px" id="triggerModals" data-toggle="modal" data-target="#testmodal1" /> 
        
      </a>

      <!-- modal -->

      <div id = "testmodal1" class="modal fade" style="left:200px" >
       <div class="modal-dialog"> 
        <div class="modal-content"> 
          <div class="modal-header">
           <h3 align="center"> User Profile </h3>
         </div> 


         <div class="modal-body" ng-controller="prodoUserProfileDataController">                 
                <div class="classMain">
                  <h5 ng-bind=" modaluser.username"></h5>
                    <img ng-src="{{modaluser.profile_pic}}" style="height:90px;width:90px; "/>
                </div>
                <br><hr>
                <div  class="classMain">
                   <h4> Product Followed </h4>
                        <div ng-repeat="products in modaluser.products_followed"  
                        class="effectpic" ><center>
                          <p >{{products.name}}</p>
                          <img ng-src="{{products.product_logo}}" class="prodleImage" ng-click="emitProductData(products.prodle,products.orgid)"></center>
                        </div>
                </div>
                <br><hr>
                 <div class="classMain">
                   <h4> Product Recommended </h4>
                        <div ng-repeat="products in modaluser.products_recommends"   class="effectpic" >
                         <center> <p >{{products.name}}</p>
                          <img ng-src="{{products.product_logo}}" class="prodleImage" ng-click="emitProductData(products.prodle,products.orgid)"></center>
                        </div>
                </div>
        </div>  










       <div class="modal-footer">
        <button class="btn btn-warning" data-dismiss="modal">Close</button>
      </div>        






    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!-- modal -->
<div class="media-body"><div>
  <div class=" pull-left " id="prodo-comment-userName"  >{{comment.user.username.substring(0,15)}}</div>
  <div ng-style="hideIfNoOrg(comment.user.orgname)" id="prodo-comment-companyName" class="pull-left"   >  &nbsp; &nbsp; &nbsp; &nbsp; @ {{toCamelCase(comment.user.orgname).substring(0,15)}}</div> <div id="prodo-comment-companyName"  ng-style="hideIfNogrp(comment.user.grpname)"> &nbsp; &nbsp;- &nbsp;{{comment.user.grpname.substring(0,15)}}</div>  

  <div class="pull-right" id="prodo-comment-timePosted" >{{fromNow(comment.datecreated)}}</div> </div>
  <div class="pull-left" id="prodo-comment-row-fluid" > {{comment.commenttext}}</div><br>
  <div class="label label-warning"   id="responseComment"  style="display: none">  </div>
  <a   id="retryIcon" ng-click="addProductComment();" style="display: none; cursor: pointer; cursor: hand;" > <span class="glyphicon glyphicon-refresh "></span> </a>
  <div class="prodo-comment-tabs " id="tabs" style="align:left;"  >
    <ul id="commentNavTab" class="nav nav-pills" ng-init="tabCommentTags = false;
    tabCommentRemove = false" >
             <!--    <li><a    ng-click="tabCommentTags = tabCommentTags === false ? true : false;
             tabCommentRemove = false;"><div id="fa-tagsComment" class="fa fa-tags"  ></div></a></li> -->
             <li ng-style="hideIfNotUser(comment.user.userid)" ><a  style="cursor: pointer; cursor: hand;" ng-click="tabCommentRemove = tabCommentRemove === false ? true : false;
              tabCommentTags = false;"><div  id="fa-removeComment" name="rm" class=" fa fa-trash-o  "  ></div></a></li>
              <li><a  style="cursor: pointer; cursor: hand;" ng-style="hideIfNotImage(comment.comment_image[0].image)"  ng-click="tabCommentImg = tabCommentImg === false ? true : false;
                tabCommentRemove = false;"><div id="fa-tagsComment" class="fa fa-picture-o"  ></div></a></li>        
              </ul> 
              <div class="tab-content">
              <!--   <div id="Tag" ng-show="tabCommentTags == 1" >
                    <form class="form-horizontal" role="form">
                        <div class="form-group"   >
                            <tags-input   ng-model="comment.tags" placeholder="Add tags" list="pretags" min-length="5"
                                         replace-spaces-with-dashes="false"></tags-input>
                        </div>
                    </form>
                  </div> -->

                  <div id="Remove" ng-show="tabCommentRemove == 1"   >
                    Are you sure you want to delete this comment ?
                    <a href="" ng-click="deleteProductComment(comment)"> Yes</a>
                  </div>     


                  <div id="Remove" ng-show="tabCommentImg == 1"   >

                   <div id="img2">
                    <img style="width:50px; height:50px;"  id="img-user" ng-src="{{comment.comment_image[0].image}}"   ng-click="captureCommentImageHere(comment.comment_image[0].image)" data-toggle="modal" data-target="#testmodalx" /> 

                  </div>      
                </div>
<!-- Code for comment image modal -->

<div id = "testmodalx" class="modal fade" style="left:200px" >
  <div class="modal-dialog"> 
    <div class="modal-content"> 

<!-- Layer slider code from slider/ only image changed -->


            <div id="layerslider-container">    
                <div id="layerslider" prodo-slider style="width: 500px; height: 250px; margin: 0 auto;">
                     <div class="ls-layer" ng-repeat="slide in org.org_images" >     
                          <img ng-src="{{commentImageShow}}"class="ls-bg" >    <!-- Function written in product controller -->
                     </div>
                 </div>
             </div>
             
<!--  -->




        <img ng-src="{{commentImageShow}}" />
    </div>
  </div>
</div>


<!--  -->




              </div>
            </div>
          </li>



