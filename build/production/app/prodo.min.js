angular.module("prodo.CommonApp",[]),angular.module("prodo.UserApp",[]),angular.module("prodo.ProdoWallApp",[]),angular.module("prodo.OrgApp",[]),angular.module("prodo.ProductApp",[]),angular.module("prodo.ProdoCommentApp",[]),angular.module("prodo.WarrantyApp",[]),angular.module("prodo.DashboardApp",[]),angular.module("prodo.ContentApp",[]),angular.module("prodo.BlogApp",[]),angular.module("prodo.AdApp",[]),angular.module("prodo.AdminApp",[]),angular.module("prodo.SubscriptionApp",[]),angular.module("prodo.UploadApp",[]),angular.module("prodo.ProdonusApp",["ui.router","ui.bootstrap","xeditable","ngAnimate","$strap.directives","vcRecaptcha","ngResource","tags-input","prodo.CommonApp","prodo.UserApp","prodo.ProdoWallApp","prodo.OrgApp","prodo.ProductApp","prodo.ProdoCommentApp","prodo.WarrantyApp","prodo.DashboardApp","prodo.ContentApp","prodo.BlogApp","prodo.AdApp","prodo.AdminApp","prodo.SubscriptionApp","prodo.UploadApp","config"]).config(["$logProvider",function(a){a.debugEnabled(!0)}]).run(["$rootScope","UserSessionService","OrgRegistrationService","$log","editableOptions",function(a,b,c,d,e){b.checkUser(),a.usersession=b,a.organizationData=c,a.$log=d,e.theme="bs3"}]).controller("ProdoMainController",["$scope","$rootScope","$state","$log","UserSessionService","OrgRegistrationService","UserSubscriptionService",function(a,b,c,d,e,f,g){c.transitionTo("home.start"),a.isShown=!1,a.showSignin=function(){a.isShown=!0,c.transitionTo("home.signin")},a.showSignup=function(){a.isShown=!1,c.transitionTo("home.start")};var h=a.$on("session-changed",function(a,b){d.debug(b),b.success?(e.authSuccess(b.success.user),h()):(e.authfailed(),h())}),i=a.$on("session-changed-failure",function(b,d){e.authfailed(),c.transitionTo("home.start"),a.showAlert("alert-danger","Server Error: "+d),i()}),j=b.$on("session",function(a,e){d.debug(e),b.usersession.isLoggedIn&&(e.isOtpPassword?c.transitionTo("messageContent.resetPassword"):e.isOtpPassword||e.isSubscribed?!e.isSubscribed||e.subscriptionExpired||e.hasDonePayment?e.isSubscribed&&e.subscriptionExpired?c.transitionTo("subscription.payment",{planid:e.subscription.planid,plantype:e.usertype}):e.org.orgid?f.getOrgDetailSettings():c.transitionTo("prodo.wall"):c.transitionTo("subscription.payment",{planid:e.subscription.planid,plantype:e.usertype}):g.getPlan()),j()});a.handleGetOrgResponse=function(b){b.success?(f.updateOrgData(b.success.organization),a.showAlert("alert-success",b.success.message)):(d.debug(b.error.message),a.showAlert("alert-danger",b.error.message))};var k=b.$on("getOrgDone",function(b,c){a.handleGetOrgResponse(c),k()}),l=b.$on("getOrgNotDone",function(b,c){a.showAlert("alert-danger","Server Error:"+c),l()}),m=b.$on("sendOrgData",function(){c.transitionTo("prodo.wall"),m()});a.logout=function(){e.logoutUser();var b=a.$on("logoutDone",function(d,e){c.transitionTo("home.start"),a.showAlert("alert-success",e),b()}),d=a.$on("logoutNotDone",function(b,c){a.showAlert("alert-danger","Server Error:"+c),d()})}}]),angular.module("prodo.UserApp").controller("UserRegistrationController",["$scope","$state","$http","$timeout","$sce","$log","UserSessionService","UserSignupService","vcRecaptchaService","UserRecaptchaService",function(a,b,c,d,e,f,g,h,i,j){a.submitted=!1,a.user={terms:!0},a.user={username:"",email:"",password:"",terms:!0},a.clearformData=function(){a.user.username="",a.user.email="",a.user.password=""},d(function(){a.hideAlert()},5e4),$("#recaptcha_reload_button").on("click",function(){$(this).find(":selected").data("placeholder");$("#recaptcha_response_field").attr("placeholder","Enter what you see")}),$("#recaptcha_audio_button").on("click",function(){$(this).find(":selected").data("placeholder");$("#recaptcha_response_field").attr("placeholder","Enter what you hear")}),a.jsonUserData=function(){var b={user:{username:a.user.username,email:a.user.email,password:a.user.password,terms:a.user.terms}};return JSON.stringify(b)},a.handleSignupResponse=function(c){c.success?(b.transitionTo("messageContent.emailverification"),a.clearformData()):"AU001"==c.error.code?(f.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger",c.error.message),b.transitionTo("home.start")):"AV001"==c.error.code?(f.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger",c.error.message),b.transitionTo("home.start")):"AT001"==c.error.code?(f.debug(c.error.code+" "+c.error.message),b.transitionTo("messageContent.resetGenerateToken")):(f.debug(c.error.message),a.showAlert("alert-danger","Prodonus Database Server error. Please wait for some time."))},a.signup=function(){if(a.signupForm.$valid){a.showSpinner();var b=a.jsonUserData();f.debug("User Data entered successfully"),j.validate(a);var c=a.$on("recaptchaNotDone",function(){a.hideSpinner(),a.showAlert("alert-danger","Recaptcha failed, please try again"),c()}),d=a.$on("recaptchaFailure",function(b,c){a.hideSpinner(),a.showAlert("alert-danger","Server is not responding. Error:"+c),d()}),e=a.$on("recaptchaDone",function(){h.saveUser(b,function(b){a.hideSpinner(),f.debug(b),a.handleSignupResponse(b),e()},function(b){a.hideSpinner(),f.debug(b),a.showAlert("alert-danger","Server Error:"+b.status),e()})})}else a.signupForm.submitted=!0},a.jsonRegenerateTokenData=function(){var b={email:a.user.email};return JSON.stringify(b)},a.handleRegenerateTokenResponse=function(c){c.success?(b.transitionTo("messageContent.emailverification"),a.clearformData()):"AU004"==c.error.code?(f.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger",c.error.message)):(f.debug(c.error.message),a.showAlert("alert-danger",c.error.message))},a.regeneratetoken=function(){a.showSpinner(),g.regenerateTokenUser(a.jsonRegenerateTokenData());var b=a.$on("regenerateTokenDone",function(c,d){a.clearformData(),a.hideSpinner(),a.handleRegenerateTokenResponse(d),b()}),c=a.$on("regenerateTokenNotDone",function(){a.clearformData(),a.hideSpinner(),c()})}}]),angular.module("prodo.UserApp").controller("UserSigninController",["$scope","$rootScope","$state","$timeout","$stateParams","$log","UserSessionService","UserSubscriptionService",function(a,b,c,d,e,f,g){a.submitted=!1,a.user={email:"",password:"",currentpassword:"",newpassword:""},a.clearformData=function(){a.user.email="",a.user.password="",a.user.currentpassword="",a.user.newpassword="",a.user.confirmnewpassword=""},d(function(){a.hideAlert()},5e4),a.jsonUserSigninData=function(){var b={email:a.user.email,password:a.user.password};return JSON.stringify(b)},a.handleSigninResponse=function(b){b.success?(g.authSuccess(b.success.user),c.transitionTo("prodo.wall"),a.showAlert("alert-success","Welcome to Prodonus, you have successfully signed up.")):"AU005"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger","You are not a registered user, please signup first")):"AU002"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):"AV001"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):"AU006"==b.error.code?(f.debug(b.error.code+" "+b.error.message),g.authSuccess(b.error.user),a.showAlert("alert-danger",b.error.message)):"AU003"==b.error.code?(f.debug(b.error.code+" "+b.error.message),c.transitionTo("messageContent.emailverification"),a.showAlert("alert-danger",b.error.message)):"AS001"==b.error.code?(f.debug(b.error.code+" "+b.error.message),g.authSuccess(b.error.user),a.showAlert("alert-danger",b.error.message)):"AS002"==b.error.code?(f.debug(b.error.code+" "+b.error.message),g.authSuccess(b.error.user),a.showAlert("alert-danger",b.error.message)):"AP001"==b.error.code?(f.debug(b.error.code+" "+b.error.message),g.authSuccess(b.error.user),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.signin=function(){a.showSpinner(),g.signinUser(a.jsonUserSigninData());var b=a.$on("signinDone",function(c,d){a.clearformData(),a.hideSpinner(),a.handleSigninResponse(d),b()}),c=a.$on("signinNotDone",function(b,d){a.clearformData(),a.hideSpinner(),a.showAlert("alert-danger","Server Error:"+d),c()})},a.jsonForgotPasswordData=function(){var b={user:{email:a.user.email}};return JSON.stringify(b)},a.handleForgotPasswordResponse=function(b){b.success?(c.transitionTo("messageContent.signin"),a.showAlert("alert-info","Your temporary password has been sent. Please check your email, and signin again.")):"AV001"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):"AV004"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):"AT001"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.forgotpassword=function(){a.showSpinner(),g.forgotPasswordUser(a.jsonForgotPasswordData());var b=a.$on("forgotPasswordDone",function(c,d){a.clearformData(),a.hideSpinner(),a.handleForgotPasswordResponse(d),b()}),c=a.$on("forgotPasswordNotDone",function(b,d){a.clearformData(),a.hideSpinner(),a.showAlert("alert-danger","Server Error:"+d),c()})},a.jsonResetPasswordData=function(){var b={user:{currentpassword:a.user.currentpassword,newpassword:a.user.newpassword}};return JSON.stringify(b)},a.handleResetPasswordResponse=function(b){b.success?b.success.isSubscribed&&b.success.subscriptionExpired&&b.success.hasDonePayment?c.transitionTo("prodo.wall"):b.success.isSubscribed||c.transitionTo("subscription.plans"):"AV001"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.resetpassword=function(){a.showSpinner(),g.resetPasswordUser(a.jsonResetPasswordData());var b=a.$on("resetPasswordDone",function(c,d){a.clearformData(),a.hideSpinner(),a.handleResetPasswordResponse(d),b()}),c=a.$on("resetPasswordNotDone",function(b,d){a.clearformData(),a.hideSpinner(),a.showAlert("alert-danger","Server Error:"+d),c()})}}]),angular.module("prodo.UserApp").factory("UserSessionService",["$rootScope","$resource","$http","$state","$log",function(a,b,c,d,e){var f={Signup:b("/api/user/signup",{},{saveUser:{method:"POST"}}),Signin:b("/api/user/signin",{},{signinUser:{method:"POST"}}),ManageUser:b("/api/user/:userid",{},{getAllUsers:{method:"GET",isArray:!0},getUserSettings:{method:"GET",params:{userid:"@userid"},isArray:!1},updateUserSettings:{method:"PUT",params:{userid:"@userid"},isArray:!1},deleteUserSettings:{method:"DELETE",params:{userid:"@userid"}}}),ForgotPassword:b("/api/user/forgotpassword",{},{forgotPassword:{method:"POST"}}),ResetPassword:b("/api/user/resetpassword/:userid",{},{resetPassword:{method:"PUT",params:{userid:"@userid"},isArray:!1}}),RegenerateToken:b("/api/regenerateverificationtoken",{},{regenerateToken:{method:"POST"}}),IsUserLoggedin:b("/api/isloggedin",{},{checkUserSession:{method:"GET"}}),Logout:b("/api/logout",{},{logoutUser:{method:"GET"}})},g={};return g.isLoggedIn=!1,g.currentUser=null,g.signinUser=function(b){f.Signin.signinUser(b,function(b){e.debug(b),a.$broadcast("signinDone",b)},function(b){e.debug(b),a.$broadcast("signinNotDone",b.status)})},g.saveUserSettings=function(b){f.ManageUser.updateUserSettings({userid:g.currentUser.userid},b,function(b){e.debug(b),a.$broadcast("updateUserDone",b)},function(b){e.debug(b),a.$broadcast("updateUserNotDone",b.status)})},g.removeUserSettings=function(){f.ManageUser.deleteUserSettings({userid:g.currentUser.userid},function(b){e.debug(b),a.$broadcast("deleteUserDone",b)},function(b){e.debug(b),a.$broadcast("daleteUserNotDone",b.status)})},g.getUserDetailSettings=function(){f.ManageUser.getUserSettings({userid:g.currentUser.userid},function(b){e.debug(b),a.$broadcast("getUserDone",b)},function(b){e.debug(b),a.$broadcast("getUserNotDone",b.status)})},g.updateUserData=function(a){g.currentUserData=a},g.forgotPasswordUser=function(b){f.ForgotPassword.forgotPassword(b,function(b){e.debug(b),a.$broadcast("forgotPasswordDone",b)},function(b){e.debug(b),a.$broadcast("forgotPasswordNotDone",b.status)})},g.resetPasswordUser=function(b){f.ResetPassword.resetPassword({userid:g.currentUser.userid},b,function(b){e.debug(b),a.$broadcast("resetPasswordDone",b)},function(b){e.debug(b),a.$broadcast("resetPasswordNotDone",b.status)})},g.regenerateTokenUser=function(b){f.RegenerateToken.regenerateToken(b,function(b){e.debug(b),a.$broadcast("regenerateTokenDone",b)},function(b){e.debug(b),a.$broadcast("regenerateTokenNotDone",b.status)})},g.init=function(){g.resetSession()},g.resetSession=function(){g.currentUser=null,g.isLoggedIn=!1},g.logoutUser=function(){f.Logout.logoutUser(function(b){e.debug(b.success.message),g.resetSession(),a.$broadcast("logoutDone",b.success.message)},function(b){e.debug(b),a.$broadcast("logoutNotDone",b.status)})},g.authSuccess=function(b){g.currentUser=b,g.isLoggedIn=!0,a.$broadcast("session",b)},g.authfailed=function(){g.resetSession()},g.checkUser=function(){f.IsUserLoggedin.checkUserSession(function(b){e.debug(b),a.$broadcast("session-changed",b)},function(b){e.debug(b),a.$broadcast("session-changed-failure",b.status)})},g}]).factory("UserSignupService",["$resource",function(a){return a("/api/user/signup",{},{saveUser:{method:"POST"}})}]).factory("UserRecaptchaService",["$http","vcRecaptchaService","$log",function(a,b,c){var d={};return d.validate=function(e){var f="POST",g="/api/recaptcha",h={recaptcha:{response:Recaptcha.get_response(),challenge:Recaptcha.get_challenge()}},i=JSON.stringify(h);a({method:f,url:g,data:i,headers:{"Content-Type":"application/json"}}).success(function(a){c.debug("success"),c.debug(a),d.handleRecaptchaResponse(e,a)}).error(function(a,d){c.debug(d),e.$broadcast("recaptchaFailure",d),b.reload()})},d.handleRecaptchaResponse=function(a,d){d.success?(c.debug(d.success),a.$emit("recaptchaDone","Success")):"AR001"==d.error.code?(c.debug(d.error.code+" "+d.error.message),$state.transitionTo("home.start")):(c.debug(d.error.message),a.$emit("recaptchaNotDone","Failure"),b.reload())},d}]),angular.module("prodo.OrgApp").controller("OrgRegistrationController",["$scope","OrgModel","$state","$stateParams","$log","OrgRegistrationService",function(a,b,c,d,e,f){a.org=b,a.org.orgtype=d.plantype,a.countries=["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua and Barbuda","Argentina ca","Armenia","Aruba ","Austria","Azerbaijan","Bahamas","Bahrain","India"],a.goToState=function(){"manufacturer"==d.plantype?c.transitionTo("subscription.terms",{planid:d.planid,plantype:d.plantype}):c.transitionTo("subscription.finish",{planid:d.planid,plantype:d.plantype})},a.clearOrgData=function(){a.org.name="",a.org.description="",a.org.orgtype="",a.org.contractid="",a.org.address1="",a.org.address2="",a.org.address3="",a.org.country="",a.org.city="",a.org.state="",a.org.zipcode="",a.org.contact.customerhelpline1="",a.org.contact.customerhelpline2="",a.org.contact.customerhelpline3="",a.org.contact.customerhelpline4="",a.org.grpname="",a.org.invites=""},a.handleOrgResponse=function(b){b.success?(e.debug(b.success),c.transitionTo("subscription.payment",{planid:d.planid,plantype:d.plantype}),a.showAlert("alert-success",b.success.message+"Please make payment to continue with Prodonus")):(e.debug(b.error),a.showAlert("alert-danger",b.error.message))},a.jsonOrgData=function(){var b={organization:{name:a.org.name,description:a.org.description,orgtype:d.plantype,contractid:a.org.contractid,location:[{locationtype:a.org.orgaddresstype,address:{address1:a.org.address1,address2:a.org.address2,address3:a.org.address3,country:a.org.country,city:a.org.city,state:a.org.state,zipcode:a.org.zipcode},contacts:[{customerhelpline:a.org.contact.customerhelpline1},{customerhelpline:a.org.contact.customerhelpline2},{customerhelpline:a.org.contact.customerhelpline3}]}],usergrp:[{grpname:a.org.grpname,invites:a.org.invites}],terms:a.org.terms},subscription:{plantype:d.plantype,planid:d.planid}};return JSON.stringify(b)},a.registerOrg=function(){f.RegisterOrg(a.jsonOrgData());var b=a.$on("orgRegistrationDone",function(c,d){a.handleOrgResponse(d),b()}),c=a.$on("orgRegistrationNotDone",function(b,d){a.showAlert("alert-danger","Server Error:"+d),c()})}}]),angular.module("prodo.OrgApp").factory("OrgModel",function(){return{name:"",description:"",contractid:"",orginvites:[],subscription:[],grpname:"",invites:"",grpmembers:[],orgaddresstype:"",address1:"",address2:"",address3:"",country:"",city:"",state:"",zipcode:"",timezone:"",region:"",geo:{latitude:2,longitude:1},contact:{customerhelpline1:"",customerhelpline2:"",customerhelpline3:""},grpname:"",invites:"",terms:""}}).factory("OrgRegistrationService",["$rootScope","$resource","$log","$state",function(a,b,c){var d={OrgRegistration:b("/api/organization/:orgid",{},{getAllOrgs:{method:"GET",isArray:!0},getOrgSettings:{method:"GET",params:{orgid:"@orgid"}},saveOrg:{method:"POST"},updateOrgSettings:{method:"PUT",params:{orgid:"@orgid"},isArray:!1},deleteOrgSettings:{method:"DELETE",params:{orgid:"@orgid"}}}),ManageOrgLocation:b("/api/orgaddress/:orgid/:orgaddressid",{},{getAllOrgAddress:{method:"GET",params:{orgid:"@orgid"}},addOrgAddress:{method:"POST",params:{orgid:"@orgid"}},updateOrgAddress:{method:"PUT",params:{orgid:"@orgid",orgaddressid:"@orgaddressid"},isArray:!1},deleteOrgAddressById:{method:"DELETE",params:{orgid:"@orgid",orgaddressid:"@orgaddressid"}}}),OtherOrgInvites:b("/api/otherorginvites/:orgid",{},{sendOtherOrgInvites:{method:"POST",params:{orgid:"@orgid"}}})},e={};return e.RegisterOrg=function(b){d.OrgRegistration.saveOrg(b,function(b){c.debug(b),a.$broadcast("orgRegistrationDone",b)},function(b){c.debug(b),a.$broadcast("orgRegistrationNotDone",b.status)})},e.saveOrgSettings=function(b){d.OrgRegistration.updateOrgSettings({orgid:a.usersession.currentUser.org.orgid},b,function(b){c.debug(b),a.$broadcast("updateOrgDone",b)},function(b){c.debug(b),a.$broadcast("updateOrgNotDone",b.status)})},e.getAllOrgAddress=function(){d.ManageOrgLocation.getAllOrgAddress({orgid:a.usersession.currentUser.org.orgid},function(b){c.debug(b),a.$broadcast("getOrgAddressDone",b)},function(b){c.debug(b),a.$broadcast("getOrgAddressNotDone",b.status)})},e.saveOrgAddress=function(b){d.ManageOrgLocation.addOrgAddress({orgid:a.usersession.currentUser.org.orgid},b,function(b){c.debug(b),a.$broadcast("addOrgAddressDone",b)},function(b){c.debug(b),a.$broadcast("addOrgAddressNotDone",b.status)})},e.updateOrgAddress=function(b,e){d.ManageOrgLocation.updateOrgAddress({orgid:a.usersession.currentUser.org.orgid,orgaddressid:e},b,function(b){c.debug(b),a.$broadcast("updateOrgAddressDone",b)},function(b){c.debug(b),a.$broadcast("updateOrgAddressNotDone",b.status)})},e.removeOrgAddress=function(b){d.ManageOrgLocation.deleteOrgAddressById({orgid:a.usersession.currentUser.org.orgid,orgaddressid:b},function(b){c.debug(b),a.$broadcast("deleteOrgAddressDone",b)},function(b){c.debug(b),a.$broadcast("deleteOrgAddressNotDone",b.status)})},e.removeOrgSettings=function(){d.OrgRegistration.deleteOrgSettings({orgid:a.usersession.currentUser.org.orgid},function(b){c.debug(b),a.$broadcast("deleteOrgDone",b)},function(b){c.debug(b),a.$broadcast("deleteOrgNotDone",b.status)})},e.getOrgDetailSettings=function(){d.OrgRegistration.getOrgSettings({orgid:a.usersession.currentUser.org.orgid},function(b){c.debug(b),a.$broadcast("getOrgDone",b)},function(b){c.debug(b),a.$broadcast("getOrgNotDone",b.status)})},e.updateOrgData=function(b){e.currentOrgData=b,a.$broadcast("sendOrgData",b)},e.updateOrgAdd=function(b){e.currentOrgAdd=b,a.$emit("getOrgAddData",b)},e.sendInvites=function(b){d.OtherOrgInvites.sendOtherOrgInvites({orgid:a.usersession.currentUser.org.orgid},b,function(b){c.debug(b),a.$broadcast("sendOrgInvitesDone",b)},function(b){c.debug(b),a.$broadcast("sendOrgInvitesNotDone",b.status)})},e}]),angular.module("prodo.CommonApp").controller("ManageAccountController",["$scope","$rootScope","$state","$http","$timeout","$log","UserSessionService","OrgRegistrationService",function(a,b,c,d,e,f,g,h){a.user=b.usersession.currentUser,a.org=h.currentOrgData,a.orgaddr=h.currentOrgAdd,a.editorEnabled=!1,a.enableEditor=function(){a.editorEnabled=!0},a.disableEditor=function(){a.editorEnabled=!1};var i=b.$on("getOrgAddData",function(b,c){a.orgaddr=c,i()});a.jsonUserAccountData=function(){var b={user:{username:a.user.username,firstname:a.user.firstname,lastname:a.user.lastname,dob:a.user.dob,gender:a.user.gender,phone:a.user.phone_number,mobile:a.user.mobile_number,email:a.user.email,password:a.user.password,currentpassword:a.user.currentpassword,newpassword:a.user.newpassword,address:{address1:a.user.address1,address2:a.user.address2,address3:a.user.address3,city:a.user.city,state:a.user.state,country:a.user.country,zipcode:a.user.zipcode},subscription:{planid:a.user.planid,planstartdate:a.user.planexpirydate,planexpirydate:a.user.planstartdate},payment:{paymentid:""},payment_history:{paymentid:""},profile_pic:a.user.profile_pic}};return JSON.stringify(b)},a.handleUpdateUserResponse=function(b){b.success?a.showAlert("alert-success",b.success.message):"AU004"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.updateUserAccount=function(){a.user.username=a.editableTitle,a.disableEditor(),g.saveUserSettings(a.jsonUserAccountData());var b=a.$on("updateUserDone",function(c,d){a.handleUpdateUserResponse(d),b()}),c=a.$on("updateUserNotDone",function(b,d){a.hideSpinner(),a.showAlert("alert-danger","Server Error:"+d),c()})},a.handleDeleteUserResponse=function(b){if(b.success){g.logoutUser();var d=a.$on("logoutDone",function(b,e){c.transitionTo("home.start"),a.showAlert("alert-success",e),d()});a.showAlert("alert-success",b.success.message)}else f.debug(b.error.message),a.showAlert("alert-danger",b.error.message)},a.deleteUserAccount=function(){g.removeUserSettings();var b=a.$on("deleteUserDone",function(c,d){a.handleDeleteUserResponse(d),b()}),c=a.$on("deleteUserNotDone",function(b,d){a.hideSpinner(),a.showAlert("alert-danger","Server Error:"+d),c()})},a.handleGetUserResponse=function(b){b.success?(g.updateUserData(b.success.user),a.showAlert("alert-success",b.success.message)):(f.debug(b.error.message),a.showAlert("alert-success",b.success.message))};var j=b.$on("getUserDone",function(b,c){a.handleGetUserResponse(c),j()}),k=b.$on("getUserNotDone",function(a,b){scope.showAlert("alert-danger","Server Error:"+b),k()});a.jsonOrgAccountData=function(){var b={organization:{name:a.org.name,description:a.org.description}};return JSON.stringify(b)},a.handleUpdateOrgResponse=function(b){b.success?a.showAlert("alert-success",b.success.message):"AU004"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.updateOrgAccount=function(){a.disableEditor(),h.saveOrgSettings(a.jsonOrgAccountData());var b=a.$on("updateOrgDone",function(c,d){a.handleUpdateOrgResponse(d),b()}),c=a.$on("updateOrgNotDone",function(b,d){a.showAlert("alert-danger","Server Error:"+d),c()})},a.handleOrgAddressResponse=function(b){b.success?(h.updateOrgAdd(b.success.orgaddress),a.showAlert("alert-success",b.success.message)):"AU004"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.getOrgAddress=function(){h.getAllOrgAddress();var b=a.$on("getOrgAddressDone",function(c,d){a.handleOrgAddressResponse(d),b()}),c=a.$on("getOrgAddressNotDone",function(b,d){a.showAlert("alert-danger","Server Error:"+d),c()})},a.jsonOrgAddressData=function(){var b={location:{address:{address1:a.org.address1,address2:a.org.address2,address3:a.org.address3,country:a.org.country,city:a.org.city,state:a.org.state,zipcode:a.org.zipcode},contacts:[{customerhelpline:a.org.contact.customerhelpline1},{customerhelpline:a.org.contact.customerhelpline2},{customerhelpline:a.org.contact.customerhelpline3}],locationtype:a.org.orgaddresstype}};return JSON.stringify(b)},a.handleAddOrgAddressResponse=function(b){b.success?a.showAlert("alert-success",b.success.message):"AU004"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.addOrgAddress=function(){h.saveOrgAddress(a.jsonOrgAddressData());var b=a.$on("addOrgAddressDone",function(c,d){a.handleAddOrgAddressResponse(d),b()}),c=a.$on("addOrgAddressNotDone",function(b,d){a.showAlert("alert-danger","Server Error:"+d),c()})},a.handleUpdateOrgAddressResponse=function(b){b.success?a.showAlert("alert-success",b.success.message):"AU004"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.updateAddress=function(b){console.log(a.jsonOrgAddressData()),h.updateOrgAddress(a.jsonOrgAddressData(),b);var c=a.$on("updateOrgAddressDone",function(b,d){a.handleUpdateOrgAddressResponse(d),c()}),d=a.$on("updateOrgAddressNotDone",function(b,c){a.showAlert("alert-danger","Server Error:"+c),d()})},a.handleDeleteOrgResponse=function(b){b.success?a.showAlert("alert-success",b.success.message):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.deleteOrgAccount=function(){h.removeOrgSettings();var b=a.$on("deleteOrgDone",function(c,d){a.handleDeleteOrgResponse(d),b()}),c=a.$on("deleteOrgNotDone",function(b,d){a.showAlert("alert-danger","Server Error:"+d),c()})},a.handleDeleteOrgAddressResponse=function(b){b.success?a.showAlert("alert-success",b.success.message):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.deleteOrgAddress=function(b){h.removeOrgAddress(b);var c=a.$on("deleteOrgAddressDone",function(b,d){a.handleDeleteOrgResponse(d),c()}),d=a.$on("deleteOrgAddressNotDone",function(b,c){a.showAlert("alert-danger","Server Error:"+c),d()})},a.orginvites=[{name:"",orgname:"",email:""}],a.addMoreInvites=function(){a.orginvites.push({})},a.jsonOrgInvitesData=function(){var b={otherorginvites:[{name:a.orginvites.name,orgname:a.invite.orgname,email:a.invite.email}]};return JSON.stringify(b)},a.handleOrgInviteResponse=function(b){b.success?a.showAlert("alert-success",b.success.message):"AU004"==b.error.code?(f.debug(b.error.code+" "+b.error.message),a.showAlert("alert-danger",b.error.message)):(f.debug(b.error.message),a.showAlert("alert-danger",b.error.message))},a.sendOrgInvites=function(){h.sendInvites(a.jsonOrgInvitesData());var b=a.$on("sendOrgInvitesDone",function(c,d){a.handleOrgInviteResponse(d),b()}),c=a.$on("sendOrgInvitesNotDone",function(b,d){a.showAlert("alert-danger","Server Error:"+d),c()})}}]),angular.module("prodo.ProdoWallApp").controller("ProdoDashboardController",["$scope","$state",function(a){a.data=[{key:"Awesome",y:500},{key:"Good",y:200},{key:"Average",y:900},{key:"Bad",y:700},{key:"Worst",y:400}]}]),angular.module("prodo.SubscriptionApp").factory("SubscriptionModel",[function(){return{planid:""}}]),angular.module("prodo.CommonApp").controller("SubscriptionController",["$rootScope","$scope","$state","$stateParams","$log","UserSessionService","UserSubscriptionService",function(a,b,c,d,e,f,g){b.makeTransition=function(c,d){"individual"==d?b.makeTransitionToState("subscription.payment",c,d):!a.usersession.currentUser.org||"manufacturer"!=d&&"company"!=d?("manufacturer"==d||"company"==d)&&b.makeTransitionToState("subscription.company",c,d):b.makeTransitionToState("subscription.payment",c,d)},b.makeTransitionToState=function(a,b,d){c.transitionTo(a,{planid:b,plantype:d})};var h=a.$on("passSubscriptionData",function(a,c){b.subscription=c,h()});b.subscription=g.currentSubscriptionData}]),angular.module("prodo.SubscriptionApp").controller("PaymentController",["$rootScope","$scope","$state","$stateParams","$log","UserSubscriptionService",function(a,b,c,d,e,f){b.subscriptionpayment={planid:d.planid,plantype:d.plantype},b.subscriptionpayment.price="0.00",b.getdiscount=function(){f.getDiscountCoupon();var a=b.$on("getSubscriptionDiscountDone",function(c,d){b.subscriptionpayment.discountcode=d,a()})},console.log(d.planid),console.log(d.plantype),b.changesubscription=function(){f.changeSubscriptionPlan(d.plantype);var a=b.$on("changeSubscriptionDone",function(c,d){b.subscriptionplandata=d,a()})},b.jsonSubscriptionPaymentData=function(){var a={payment:{usertype:d.plantype,discountcode:"",planid:d.planid}};return JSON.stringify(a)},b.handleSubscriptionPaymentResponse=function(a){a.success?(c.transitionTo("prodo.wall"),b.showAlert("alert-success",a.success.message)):"AV001"==a.error.code?(e.debug(a.error.code+" "+a.error.message),b.showAlert("alert-danger","You are not a registered user, please signup first")):"AD001"==a.error.code?(e.debug(a.error.code+" "+a.error.message),b.showAlert("alert-danger",a.error.message)):"AD002"==a.error.code?(e.debug(a.error.code+" "+a.error.message),b.showAlert("alert-danger",a.error.message)):(e.debug(a.error.message),b.showAlert("alert-danger",a.error.message))},b.makePayment=function(){f.makeSubscriptionPayment(b.jsonSubscriptionPaymentData());var a=b.$on("getSubscriptionPaymentDone",function(c,d){b.handleSubscriptionPaymentResponse(d),a()}),c=b.$on("getSubscriptionPaymentNotDone",function(a,d){b.showAlert("alert-danger","Server Error:"+d),c()})}}]),angular.module("prodo.CommonApp").factory("UserSubscriptionService",["$rootScope","$resource","$http","$state","$log",function(a,b,c,d,e){var f={GetSubscription:b("/api/subscription",{},{getSubscriptionPlan:{method:"GET"}}),ChangeSubscription:b("/api/subscription/:plantype",{},{changeSubscriptionPlan:{method:"GET",params:{plantype:"@plantype"},isArray:!1}}),MakePayment:b("/api/makepayment",{},{getSubscriptionPayment:{method:"POST"}}),GetSubscriptionDiscount:b("/api/discount",{},{getSubscriptionDiscountPlan:{method:"GET"}})},g={};g.getPlan=function(){f.GetSubscription.getSubscriptionPlan(function(b){e.debug(b),a.$broadcast("getSubscriptionDone",b.success.subscription)},function(b){e.debug(b),a.$broadcast("getSubscriptionNotDone",b.status)})};var h=a.$on("getSubscriptionDone",function(a,b){g.updateSubscriptionData(b),d.transitionTo("subscription.plans"),h()});g.changeSubscriptionPlan=function(b){f.ChangeSubscription.changeSubscriptionPlan({plantype:b},function(b){e.debug(b),a.$broadcast("changeSubscriptionDone",b.success.subscription)},function(b){e.debug(b),a.$broadcast("changeSubscriptionNotDone",b.status)})};var h=a.$on("getSubscriptionDone",function(a,b){d.transitionTo("subscription.plans"),g.updateSubscriptionData(b),h()});return g.getDiscountCoupon=function(){f.GetSubscriptionDiscount.getSubscriptionDiscountPlan(function(b){e.debug(b),a.$broadcast("getSubscriptionDiscountDone",b.success.discount.discountcode)},function(b){e.debug(b),a.$broadcast("getSubscriptionDiscountNotDone",b.status)})},g.makeSubscriptionPayment=function(b){f.MakePayment.getSubscriptionPayment(b,function(b){e.debug(b),a.$broadcast("getSubscriptionPaymentDone",b)},function(b){e.debug(b),a.$broadcast("getSubscriptionPaymentNotDone",b.status)})},g.updateSubscriptionData=function(b){g.currentSubscriptionData=b,a.$emit("passSubscriptionData",b)},g}]),angular.module("prodo.CommonApp").directive("prodonusPasswordCheck",["$parse",function(a){return{require:"ngModel",link:function(b,c,d,e){b.$watch(function(){return a(d.prodonusPasswordCheck)(b)===e.$modelValue},function(a){e.$setValidity("mismatch",a)})}}}]).directive("prodonusPasswordValidate",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(b){return a.pwdValidLength=b&&b.length>=6?"valid":void 0,a.pwdHasAlphabet=b&&/[A-z]/.test(b)?"valid":void 0,a.pwdHasNumber=b&&/\d/.test(b)?"valid":void 0,a.pwdHasSymbol=b&&/(?=(?:.*[!@#$%^&*-]){1})/.test(b)?"valid":void 0,a.pwdValidLength&&a.pwdHasAlphabet&&a.pwdHasNumber&&a.pwdHasSymbol?(d.$setValidity("pwd",!0),b):void d.$setValidity("pwd",!1)
})}}}).directive("prodonusMultiEmailValidate",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(b){return a.emailHas=b&&/(([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)(\s*,\s*|\s*$)+)/.test(b)?"valid":void 0,a.emailHas?(d.$setValidity("email",!0),b):void d.$setValidity("email",!1)})}}}).directive("notification",["$timeout",function(a){return{restrict:"E",replace:!0,scope:{ngModel:"="},template:'<div class="alert alert-info fade" bs-alert="ngModel"></div>',link:function(b,c){a(function(){c.hide()},6e5)}}}]).directive("popdown",function(){return{restrict:"E",scope:{},replace:!0,controller:["$scope","PopdownAPI",function(a,b){function c(){a.show=!(!a.api.status||!a.api.message)}a.show=!1,a.api=b,a.$watch("api.status",c),a.$watch("api.message",c),a.hide=function(){a.show=!1,a.api.clear()}}],template:'<div class="alert alert-{{api.status}}" ng-show="show">  <button type="button" class="close" ng-click="hide()">&times;</button>  {{api.message}}</div>'}}).directive("prodoAlertMessage",["$timeout",function(){return{restrict:"EA",replace:!0,template:'<div style="text-align:left; margin: 5px auto;" class="alert {{mainAlert.alertType}}" ng-show="mainAlert.isShown"><button type="button" class="close" ng-click="closeAlert()" aria-hidden="true">&times;</button>{{mainAlert.message}}<a href="#/{{mainAlert.linkpage}}" class="alert-link"> {{mainAlert.linkmessage}}</a></div>',controller:["$scope","$rootScope",function(a){a.mainAlert={isShown:!1},a.showAlert=function(b,c,d,e){a.mainAlert.message=c,a.mainAlert.isShown=!0,a.mainAlert.linkpage=d,a.mainAlert.linkmessage=e,a.mainAlert.alertType=b},a.showmessage=function(b,c,d,e){var f=b,g=c,h=d,i=e;return a.showAlert(f,g,h,i),!0},a.closeAlert=function(){a.mainAlert.isShown=!1},a.hideAlert=function(){a.mainAlert.isShown=!1}}]}}]).directive("prodoSpinner",["$timeout",function(){return{restrict:"EA",replace:!0,template:'<span ng-show="spinner.isShown"><i style="color:blue;" class="fa fa-spinner fa-spin fa-2x"></i></span>',controller:["$scope","$rootScope",function(a){a.spinner={isShown:!1},a.showSpinner=function(){a.spinner.isShown=!0},a.hideSpinner=function(){a.spinner.isShown=!1}}]}}]).directive("prodovideo",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{video:"@"},template:'<div class="prodovideo"><iframe ng-src="{{ video }}"></iframe></div>',link:function(a,b,c){var d=c.height/c.width*100;b[0].style.paddingTop=d+"%"}}}).directive("prodoSlider",function(){var a={restrict:"A",link:function(a,b){$(b).layerSlider()}};return a}).directive("prodoNav",function(){var a={restrict:"A",link:function(){$("document").ready(function(){$("ul.nav.nav-pills li a").click(function(){$(this).parent().addClass("active").siblings().removeClass("active")})})}};return a}).directive("prodoUnique",["$http",function(a){var b={restrict:"A",link:function(){$("#prodo-form-input-username-signup").on("keyup",function(){var b=$(this).val().trim(),c={username:b};b.length>6&&b.length<15&&a({method:"GET",url:"/api/userunique/"+b,data:c}).success(function(a){console.log(a)}).error(function(a){console.log(a)})})}};return b}]).directive("prodoBarchart",function(){var a={restrict:"EA",link:function(){function a(){return[{key:"Product Ratings",values:[{label:"Awsome ",value:300},{label:"Average",value:600},{label:"Good",value:200},{label:"Bad",value:400},{label:"Worst",value:10},{label:"Complaints",value:20}]}]}nv.addGraph(function(){var b=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).showValues(!0);return d3.select("#chart").datum(a()).transition().duration(50).call(b),nv.utils.windowResize(b.update),b})}};return a}).directive("prodoPiechart",function(){var a={restrict:"EA",link:function(a){nv.addGraph(function(){var b=500,c=500,d=nv.models.pieChart().x(function(a){return a.key}).y(function(a){return a.y}).color(d3.scale.category10().range()).width(b).height(c);return d3.select("#test1").datum(a.data).transition().duration(1200).attr("width",b).attr("height",c).call(d),d.dispatch.on("stateChange",function(a){nv.log("New State:",JSON.stringify(a))}),d})}};return a}).directive("prodoProductChart",function(){var a={restrict:"EA",link:function(){var a=d3.select("#a").append("div").attr("class","abc").style("opacity",0),b=d3.select("#a").style("background-image","url(http://www.digitaltrends.com/wp-content/uploads/2010/06/apple-iphone-4-91.jpg) ").style("background-repeat","no-repeat"),c=b.append("svg"),d=c.append("circle").attr("cx",79).attr("cy",80).attr("r",5).style("fill","blue");d.on("mouseenter",function(){d.attr("r",10).style("fill","none").style("stroke","red").style("stroke-opacity",1e-6).style("stroke-width",3).transition().duration(500).attr("r",5).style("fill","blue").style("stroke-opacity",2),a.text("Front 12 Megapixel Camera").style("opacity",2).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px")}).on("mouseout",function(){d.attr("r",5).style("stroke","none"),a.style("opacity",0)}),l2=c.append("circle").attr("cx",52).attr("cy",237).attr("r",8).style("fill","blue").on("mouseover",function(){l2.attr("r",12).style("fill","none").style("stroke","red").style("stroke-opacity",1e-6).style("stroke-width",3).transition().duration(500).attr("r",8).style("fill","blue").style("stroke-opacity",2),a.text("Screen").style("opacity",2).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px")}).on("mouseout",function(){l2.attr("r",8).style("stroke","none"),a.style("opacity",0)}),l3=c.append("circle").attr("cx",120).attr("cy",90).attr("r",5).style("fill","blue").on("mouseover",function(){l3.attr("r",10).style("fill","none").style("stroke","red").style("stroke-opacity",1e-6).style("stroke-width",3).transition().duration(500).attr("r",5).style("fill","blue").style("stroke-opacity",2),a.text("Speaker").style("opacity",2).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px")}).on("mouseout",function(){l3.attr("r",5).style("stroke","none"),a.style("opacity",0)}),l4=c.append("circle").attr("cx",100).attr("cy",370).attr("r",4).style("fill","blue").on("mouseover",function(){l4.attr("r",10).style("fill","none").style("stroke","red").style("stroke-opacity",1e-6).style("stroke-width",3).transition().duration(500).attr("r",4).style("fill","blue").style("stroke-opacity",2),a.text("Home Button").style("opacity",2).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px")}).on("mouseout",function(){l4.attr("r",4).style("stroke","none"),a.style("opacity",0)}),l5=c.append("circle").attr("cx",280).attr("cy",90).attr("r",4).style("fill","blue").on("mouseover",function(){l5.attr("r",10).style("fill","none").style("stroke","red").style("stroke-opacity",1e-6).style("stroke-width",3).transition().duration(500).attr("r",4).style("fill","blue").style("stroke-opacity",2),a.text("Rear Main Camera").style("opacity",2).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px")}).on("mouseout",function(){l5.attr("r",4).style("stroke","none"),a.style("opacity",0)}),l6=c.append("circle").attr("cx",305).attr("cy",67).attr("r",4).style("fill","blue").on("mouseover",function(){l6.attr("r",7).style("fill","none").style("stroke","red").style("stroke-opacity",1e-6).style("stroke-width",3).transition().duration(500).attr("r",4).style("fill","blue").style("stroke-opacity",2),a.text("Flash").style("opacity",2).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px")}).on("mouseout",function(){l6.attr("r",2).style("stroke","none"),a.style("opacity",0)}),l7=c.append("circle").attr("cx",488).attr("cy",140).attr("r",4).style("fill","blue").on("mouseover",function(){l7.attr("r",10).style("fill","none").style("stroke","red").style("stroke-opacity",1e-6).style("stroke-width",3).transition().duration(500).attr("r",5).style("fill","blue").style("stroke-opacity",2),a.text("Volume Keys").style("opacity",4).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px")}).on("mouseout",function(){l7.attr("r",4).style("stroke","none"),a.style("opacity",0)})}};return a}).directive("prodoIndia",function(){var a={restrict:"EA",link:function(){function a(){c.scale(6700),c.translate([-1240,720])}var b,c=d3.geo.mercator(),d=d3.geo.path().projection(c),e=d3.select("#map").append("svg:svg").attr("class","maps").attr("width",600).attr("height",800).call(a),f=e.append("svg:g").attr("id","india"),g=d3.select("#map").append("div").attr("class","abctooltip").style("opacity",0);d3.json("../../dashboard/json/IndiaData.json",function(a){f.selectAll("path").data(a.features).enter().append("path").attr("d",d)}),d3.json("../../dashboard/json/Counties.json",function(a){b=a.reduce(function(a,b){return a[b.id]=b,a},{}),f.selectAll("path").style("fill",function(a){return a.amount<2?"rgb(247,251,255)":a.amount>1&&a.amount<3?"rgb(8,48,107)":a.amount>2&&a.amount<4?"rgb(8,81,156)":a.amount>3&&a.amount<5?"rgb(8,81,156)":"rgb(8,48,107)"}).attr("d",d).on("mouseover",function(a){d3.select("#subtitle").text(a.id);g.text("State: "+a.id+"  Number of Customers: "+1e5*a.amount).style("opacity",4).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px");d3.select("#subblurb").text(a.comment);console.log("The amount is "+a.amount)}).on("mouseout",function(){g.style("opacity",0)}).on("click",function(){})})}};return a}),angular.module("prodo.ProductApp").controller("DragImageController",["$scope","$rootScope","$log",function(a,b,c){function d(a){i.filereader===!0&&j[a.type]===!0?(f=new FileReader,f.onload=function(a){var c=new Image;c.src=a.target.result,c.id="prodo-uploadedCommentImage",document.getElementById("crossButton").style.display="inline",b.comment_image_l=[{image:c.src}],c.width=250,h.appendChild(c),document.getElementById("prodo-comment-commentContainer").style.marginTop="60px"},f.readAsDataURL(a)):h.innerHTML+=" Uploaded "+a.name+" "+(a.size?(a.size/1024|0)+"K":""),g=new FileReader,g.onload=function(c){var d=c.target.result;b.file_data={filetype:a.type,filename:a.name,filebuffer:d}},g.readAsBinaryString(a)}function e(a){for(var b=i.formdata?new FormData:null,e=0;e<a.length;e++)i.formdata&&b.append("file",a[e]),d(a[e]),c.debug(a[e].name)}var f,g;b.count=0;{var h=document.getElementById("holder"),i={filereader:"undefined"!=typeof FileReader,dnd:"draggable"in document.createElement("span"),formdata:!!window.FormData},j=({filereader:document.getElementById("filereader"),formdata:document.getElementById("formdata"),progress:document.getElementById("progress")},{"image/png":!0,"image/jpeg":!0,"image/gif":!0});document.getElementById("upload")}i.dnd&&(h.ondragover=function(){return this.className="hover",!1},h.ondragend=function(){return this.className="",!1},h.ondrop=function(a){b.count++,this.className="",a.preventDefault(),j[a.dataTransfer.files[0].type]===!1?document.getElementById("CommentImg").innerHTML="Add image only":a.dataTransfer.files[0].size/1024>500?document.getElementById("CommentImg").innerHTML="Image size must ne less than 500kb":b.count>1?document.getElementById("CommentImg").innerHTML="Add only one image at a time":1==b.count&&j[a.dataTransfer.files[0].type]===!0&&a.dataTransfer.files[0].size/1024<500&&e(a.dataTransfer.files)}),a.clearReader=function(){c.debug("Clear called"),document.getElementById("prodo-comment-commentContainer").style.marginTop="0px",document.getElementById("crossButton").style.display="none",f.abort(),g.abort(),f=new FileReader,g=new FileReader,b.file_data="",b.count--;var a=document.getElementById("prodo-uploadedCommentImage");"undefined"!=typeof a&&null!=a&&a.parentNode.removeChild(a)}}]),angular.module("prodo.ProductApp").controller("ProductController",["$scope","$log","$rootScope","ProductService","UserSessionService","$http","CommentLoadMoreService","ENV",function(a,b,c,d,e,f,g,h){function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function j(){return i()+"-"+i()+"-"+Date.now().toString()}a.productComments={comments:[{}]},a.newProductComment=[],c.productCommentResponsearray=[],a.mytags,a.count=0,a.commenttextField={userComment:""},a.pretags=["addition","aggregate","all","bad news","budget","cost","damage","entirety","expense","extent","list","lot","net","outlay","output","price tag","product","quantum","score","set-back","sum","tab","tidy sum","whole","article","asset","belonging","chattel","goods","line","material","object","produce","property","specialty","stock","thing","ware","good"],a.productcommentResponseListener;a.editStatus,a.product={product:[{}]},a.newProduct={product:[{}]},a.type="product",c.product_prodle,c.orgid,a.pImages_l={product_images:[{}]},a.userIDFromSession,a.usernameFromSession,a.grpnameFromSession,a.orgnameFromSession,a.orgidFromSession,a.socket,c.$on("product",function(a,b){c.product_prodle=b.prodle,c.orgid=b.orgid}),a.getUserDetails=function(){c.usersession.currentUser.org?(a.grpnameFromSession=c.usersession.currentUser.org.grpname,a.orgidFromSession=c.usersession.currentUser.org.orgid,a.orgnameFromSession=c.usersession.currentUser.org.orgname):(a.grpnameFromSession="",a.orgnameFromSession="",a.orgidFromSession=""),a.userIDFromSession=c.usersession.currentUser.userid,a.usernameFromSession=c.usersession.currentUser.username},a.getUserDetails(),a.getProduct=function(){d.getProduct({orgid:c.orgid,prodle:c.product_prodle},function(d){if(void 0==d.success){var e=document.getElementById("prodo-comment-container");b.debug(e),1==c.usersession.currentUser.org.isAdmin?($("#prodoCommentsTab").css("display","none"),$("#tabComments").css("display","none"),$("#prodo.productAdmin").css("display","inline"),$("#tabproductupload").css("display","inline"),$("#prodoUploadTab").css("display","inline")):(e.innerHTML="<br>Please start following a product using search...<br><br>",a.showAlert("alert-danger"," Product not available ..."))}else b.debug(d.success.product),a.product=d.success.product,c.product_prodle=d.success.product.prodle,a.productComments=d.success.product.product_comments,a.pImages_l=d.success.product.product_images,0==d.success.product.product_comments.length?$("#load-more").css("display","none"):$("#load-more").css("display","inline")},function(c){b.debug(c);var d=document.getElementById("prodo-comment-container");b.debug(d),d.innerHTML="<br> Server error please try after some time<br><br>",a.showAlert("alert-danger","Server Error:"+c.status)})},a.getProduct(),localStorage.sid=c.usersession.currentUser.sessionid,b.debug(h.apiEndpoint),a.socket=io.connect(h.apiEndpoint+h.port+"/api/prodoapp",{query:"session_id="+localStorage.sid}),a.socket.removeAllListeners("addcommentResponse"),a.socket.on("addcommentResponse",function(c,d){c?(b.debug(c.error.message),a.showErrorIfCommentNotAdded(),a.showRetryIconIfCommentNotAdded()):d&&(a.ifErrorAddingComment=!1,b.debug("addcommentResponse success"+d.success.product_comment))}),a.productcommentResponseListener="productcommentResponse"+c.product_prodle,a.socket.removeAllListeners(a.productcommentResponseListener),a.socket.on(a.productcommentResponseListener,function(d,e){if(d)b.debug(d.error.message);else if(e){b.debug("productcomment  Response success"+JSON.stringify(e.success.product_comment)),a.newProductComment={product_comment:{user:{userid:e.success.product_comment.user.userid,username:e.success.product_comment.user.username,orgname:e.success.product_comment.user.orgname,grpname:e.success.product_comment.user.grpname,profilepic:e.success.product_comment.user.profilepic},commentid:e.success.product_comment.commentid,type:e.success.product_comment.type,datecreated:e.success.product_comment.datecreated,commenttext:e.success.product_comment.commenttext}},c.productCommentResponsearray.push(a.newProductComment.product_comment),b.debug(c.productCommentResponsearray),a.count=c.productCommentResponsearray.length,b.debug(a.count);var f=document.getElementById("responseComment");f.style.display="inline",f.innerHTML=a.count+" new comments"}}),a.commenttextField.userComment="",a.getTagsFromCommentText=function(){var c=a.commenttextField.userComment;a.mytags=a.pretags;for(var d=[],e=c.split(" "),f=0;f<e.length;f++)for(var g=0;g<a.mytags.length;g++)e[f]==a.mytags[g]&&d.push(e[f]);a.mytags=d,b.debug(a.mytags)},a.$watch("commenttextField.userComment",function(){a.getTagsFromCommentText(),0==a.mytags.length?$("#prodo-productTags").css("display","none"):($("#prodo-productTags").css("display","inline"),document.getElementById("prodo-comment-commentContainer").style.marginTop="80px")}),a.addProductComment=function(){if(a.getTagsFromCommentText(a),b.debug(c.file_data),b.debug(c.comment_image_l),""==c.file_data||" "==c.file_data||void 0==c.file_data||null==c.file_data?(a.newProductComment={product_comment:{user:{userid:a.userIDFromSession,username:a.usernameFromSession,orgname:a.orgnameFromSession,grpname:a.grpnameFromSession,profilepic:c.usersession.currentUser.profile_pic},commentid:j(),type:a.type,datecreated:Date.now(),tags:a.mytags,commenttext:a.commenttextField.userComment}},a.newProductComment_image={product_comment:{user:{userid:a.userIDFromSession,username:a.usernameFromSession,orgname:a.orgnameFromSession,grpname:a.grpnameFromSession,profilepic:c.usersession.currentUser.profile_pic},commentid:j(),type:a.type,datecreated:Date.now(),tags:a.mytags,commenttext:a.commenttextField.userComment}}):(a.newProductComment={product_comment:{user:{userid:a.userIDFromSession,username:a.usernameFromSession,orgname:a.orgnameFromSession,grpname:a.grpnameFromSession,profilepic:c.usersession.currentUser.profile_pic},commentid:j(),type:a.type,datecreated:Date.now(),commenttext:a.commenttextField.userComment,tags:a.mytags,comment_image:c.file_data}},a.newProductComment_image={product_comment:{user:{userid:a.userIDFromSession,username:a.usernameFromSession,orgname:a.orgnameFromSession,grpname:a.grpnameFromSession,profilepic:c.usersession.currentUser.profile_pic},commentid:j(),type:a.type,datecreated:Date.now(),tags:a.mytags,commenttext:a.commenttextField.userComment,comment_image:c.comment_image_l}},c.file_data=""),b.debug(a.newProductComment),""!==a.commenttextField.userComment){a.socket.emit("addComment",c.product_prodle,a.newProductComment.product_comment),a.productComments.unshift(a.newProductComment_image.product_comment),a.commenttextField.userComment="",c.count=0,document.getElementById("prodo-comment-commentContainer").style.marginTop="0px",document.getElementById("crossButton").style.display="none";var d=document.getElementById("prodo-uploadedCommentImage");"undefined"!=typeof d&&null!=d&&d.parentNode.removeChild(d)}},a.getLatestComments=function(){b.debug(c.productCommentResponsearray),a.reversecomments_l=a.productCommentResponsearray.reverse(),b.debug(a.reversecomments_l),a.productComments=a.reversecomments_l.concat(a.productComments),b.debug(a.productComments);var d=document.getElementById("responseComment");d.style.display="none",d.innerHTML="",a.productCommentResponsearray.length=0,a.reversecomments_l.length=0,a.count=0},a.handleSaveProductResponse=function(c){c.success?a.showAlert("alert-success",c.success.message):"AV001"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger",c.error.message)):"AP001"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger",c.error.message)):(b.debug(c.error.message),a.showAlert("alert-danger",c.error.message))},a.addProduct=function(e){a.newProduct={product:{display_name:a.display_name,serial_no:a.product.serial_no,model_no:a.product.model_no,name:a.product.name,description:a.product.description}},"add"==e?c.usersession.currentUser.org.isAdmin?d.saveProduct({orgid:a.orgidFromSession},a.newProduct,function(c){b.debug(c),a.handleSaveProductResponse(c)},function(a){b.debug(a)}):a.showAlert("alert-danger","You dont have rights to add product..."):"update"==e&&(c.usersession.currentUser.isAdmin?a.orgidFromSession===c.orgid&&d.updateProduct({orgid:a.orgidFromSession,prodle:c.product_prodle},a.newProduct,function(c){b.debug(c),a.handleSaveProductResponse(c)},function(a){b.debug(a)}):a.showAlert("alert-danger","You dont have rights to update this product..."))},a.deleteProduct=function(){c.usersession.currentUser.isAdmin?a.orgidFromSession===c.orgid&&d.deleteProduct({orgid:a.orgidFromSession,prodle:c.product_prodle}):a.showAlert("alert-danger","You dont have rights to delete this product...")},a.ShowDiscontinuedSupport=function(a){return a.support_discontinuation_date?{display:"inline"}:{display:"none"}},a.ShowDiscontinuedSale=function(a){return a.sale_discontinuation_date?{display:"inline"}:{display:"none"}},a.ShowBannedDate=function(a){return a.banneddate?{display:"inline"}:void 0},a.hideIfNotUser=function(b){return b&&b!==a.userIDFromSession?{display:"none"}:void 0},a.hideIfNoOrg=function(a){return""==a||" "==a||void 0==a||null==a?{display:"none"}:void 0},a.hideIfNogrp=function(a){return""==a||" "==a||void 0==a||null==a?{display:"none"}:void 0},a.hideIfNotImage=function(a){return""==a||" "==a||void 0==a||null==a?{display:"none"}:void 0},a.showErrorIfCommentNotAdded=function(){var a=document.getElementById("responseComment");a.style.display="inline",a.innerHTML="Error adding comment please try again.."},a.showRetryIconIfCommentNotAdded=function(){var a=document.getElementById("retryIcon");a.style.display="inline"},a.masterChange=function(){$(".imgToggles").is(":checked")?$(".imgToggles").prop("checked",!1):$(".imgToggles").prop("checked",!0)},a.chckedIndexs=[],a.checkedIndex=function(c){-1===a.chckedIndexs.indexOf(c)?a.chckedIndexs.push(c):a.chckedIndexs.splice(a.chckedIndexs.indexOf(c),1),b.debug(a.chckedIndexs)},a.deleteProductImages=function(){a.imgIds=[{}],a.ids,$(":checkbox:checked").each(function(b){a.imgIds[b]=$(this).val(),a.ids=$(this).val()}),angular.forEach(a.chckedIndexs,function(c){b.debug("value= "+c);a.pImages_l.indexOf(c);a.pImages_l.splice(a.pImages_l.indexOf(c),1)}),a.chckedIndexs=[],a.temp={prodleimageids:a.imgIds},f({method:"DELETE",url:h.apiEndpoint_notSocket+"/api/image/product/"+a.orgidFromSession+"/"+c.product_prodle+"?prodleimageids="+a.imgIds}).success(function(a){b.debug(a)}).error(function(a,c){b.debug(c)})},c.usersession.currentUser.org.isAdmin&&a.orgidFromSession===c.orgid&&(c.isAdminCheck=!0),a.checkAdmin=function(){if(1==c.isAdminCheck){var a=document.getElementById("prodo.productAdmin");a.style.display="inline"}},a.checkAdminProductUpload=function(){1==c.isAdminCheck&&$("#Upload-clck").css("display","block")},a.checkAdminProductUpload(),a.checkAdminProductImagesDelete=function(){return 1==c.isAdminCheck?{display:"inline"}:{display:"none"}},a.formatDate=function(a){return moment(a).format("DD MMM YYYY")},$(document).ready(function(){$("#holder").hover(function(){var a=$("#prodo-comment-Textbox").height(),b=$("#prodo-comment-Textbox").width();document.getElementById("holder").style.height=a,document.getElementById("holder").style.width=b,b="",a=""},function(){document.getElementById("holder").style.height="40px"})}),a.handleLoadMoreCommentResponse=function(c){if(console.log(c),void 0!=c.success){b.debug(c.success.comment);for(var d=0;d<c.success.comment.length;d++)a.productComments.push(c.success.comment[d])}else"AC002"==c.error.code?($("#loadMoreCommentMsg").html(c.error.message),$("#load-more").hide(),b.debug(c.error.message)):"AC001"==c.error.code?(b.debug(c.error.message),$("#loadMoreCommentMsg").html(c.error.message)):(b.debug(c.error.message),$("#loadMoreCommentMsg").html(c.error.message))},$("#load-more").show(),a.getLastCommentId=function(){b.debug(a.productComments),a.productComments;var c=a.productComments.length;b.debug(c);var d=a.productComments[c-1];return b.debug(d.commentid),d.commentid},a.loadMoreComments=function(){$("#img-spinner").show();var c=a.getLastCommentId();g.loadMoreComments({commentid:c},function(b){a.handleLoadMoreCommentResponse(b),$("#img-spinner").hide()},function(a){b.debug(a)})},$("#img-spinner").hide(),$(function(){$("#prodo-comment-Textbox").popover({title:"How to add comment",content:"Add comment as product feature name and its performance..."}).blur(function(){$(this).popover("hide")})})}]),angular.module("prodo.ProductApp").factory("ProductService",["$resource",function(a){return a("/api/product/:orgid/:prodle",{},{getProduct:{method:"GET",params:{orgid:"id",prodle:"id"}},updateProduct:{method:"PUT",params:{orgid:"id",prodle:"id"},isArray:!1},deleteProduct:{method:"DELETE",params:{orgid:"id",prodle:"id"}},saveProduct:{method:"POST",params:{orgid:"id"}}})}]).factory("CommentService",["$resource",function(a){return a("/api/comment/:commentid",{},{deleteComment:{method:"DELETE",params:{commentid:"id"}}})}]).factory("CommentLoadMoreService",["$resource",function(a){return a("/api/nextcomments/:commentid",{},{loadMoreComments:{method:"GET",params:{commentid:"id"}}})}]),angular.module("prodo.WarrantyApp").controller("WarrantyController",["$scope","$log","WarrantyService","WarrantySaveService",function(a,b,c){a.warrantyComments={comments:[{}]},a.mytags,a.warranty,a.userIDFromSession,a.userFullnameFromSession,a.socket,a.newWarranty={product:[{}]},a.commenttextField={userComment:""},a.type="warranty",a.pretags=["addition","aggregate","all","bad news","budget","cost","damage","entirety","expense","extent","list","lot","net","outlay","output","price tag","product","quantum","score","set-back","sum","tab","tidy sum","whole","article","asset","belonging","chattel","goods","line","material","object","produce","property","specialty","stock","thing","ware","good"],a.showErrorIfCommentNotAdded=function(){var a=document.getElementById("responseComment");a.style.display="inline",a.innerHTML="Error adding comment please try again.."},a.showRetryIconIfCommentNotAdded=function(){var a=document.getElementById("retryIcon");a.style.display="inline"},a.socket=io.connect("http://ec2-54-254-210-45.ap-southeast-1.compute.amazonaws.com:8000",{query:"session_id="+localStorage.sid}),a.socket.on("addcommentResponse",function(c,d){c?(b.debug(c.error.message),a.showErrorIfCommentNotAdded(),a.showRetryIconIfCommentNotAdded()):d&&(a.ifErrorAddingComment=!1,b.debug("addcommentResponse success"+d.success.product_comment))}),a.socket.on("productcommentResponse",function(c,d){if(c)b.debug(c.error.message);else if(d){b.debug("productcomment  Response success"+d.success.product_comment),a.productCommentResponsearray.push(d.success.product_comment);var e=a.productCommentResponsearray.length;b.debug(e);var f=document.getElementById("responseComment");f.style.display="inline",f.innerHTML=e+" new comments"}}),a.handleSaveWarrantyResponse=function(a){a.success?alert(a.success.message):"AV001"==a.error.code?(b.debug(a.error.code+" "+a.error.message),alert(a.error.message)):"AP001"==a.error.code?(b.debug(a.error.code+" "+a.error.message),alert(a.error.message)):(b.debug(a.error.message),alert(a.error.message))},a.productWarranty={warranty:[{warrantyno:"1",modelno:"1123",serialno:"123123",dateofpurchase:"12 Nov 13",invoiceno:"2"},{warrantyno:"2",modelno:"2343",serialno:"12345345323",dateofpurchase:"11 Nov 13",invoiceno:"4"},{warrantyno:"3",modelno:"654645",serialno:"7676767",dateofpurchase:"12 Oct 13",invoiceno:"5"}]},b.debug("data= "+a.productWarranty.warranty),a.getWarrantyFunction=function(){c.getWarranty({prodle:"xk7i99lj8"},function(c){b.debug(c.success.warranty.warranty_comments),a.warranty=c.success.warranty,a.warrantyComments=c.success.warranty.warranty_comments},function(a){b.debug(a)})},a.getLatestComments=function(){a.getWarrantyFunction();var b=document.getElementById("responseComment");b.style.display="none",b.innerHTML=""},a.warrantyComments={comments:[{commenttext:"good warranty service",status:"active",datecreated:"2013-12-16T07:53:52.725Z",tags:[],user:{userid:"uxkfzVj7or",fullname:"Bhagyashri"}},{commenttext:"hiii",status:"active",datecreated:"2013-12-16T07:50:47.763Z",tags:[],user:{userid:"uxkfzVj7or",fullname:"Bhagyashri"}}]},a.deleteWarranty=function(b){var c=a.productWarranty.warranty.indexOf(b);-1!=c&&a.productWarranty.warranty.splice(c,1)},a.hideIfNotUser=function(b){return b&&b!==a.userFullnameFromSession?{display:"none"}:void 0},a.addWarranty=function(){a.newWarranty={warranty:{warrantyno:"4",modelno:a.warranty.modelno,serialno:a.warranty.serialno,dateofpurchase:a.warranty.dateofpurchase,invoiceno:a.warranty.invoiceno}},a.productWarranty.warranty.push(a.newWarranty.warranty),a.warranty.modelno="",a.warranty.serialno="",a.warranty.dateofpurchase="",a.warranty.invoiceno=""}}]),angular.module("prodo.ProductApp").factory("WarrantyService",["$resource",function(a){return a("/api/warranty/:prodle",{},{getProduct:{method:"GET",params:{prodle:"id"}}})}]).factory("WarrantySaveService",["$resource",function(a){return a("/api/warranty/:orgid",{},{saveProduct:{method:"POST",params:{orgid:"orge1LSosNiS"}}})}]),angular.module("prodo.UploadApp").controller("UploadController",["$scope","$log","$rootScope","fileReader","ENV",function(a,b,c,d,e){a.socket=io.connect(e.apiEndpoint+e.port+"/api/prodoupload",{query:"session_id="+c.usersession.currentUser.sessionid}),a.fileLength,a.uploadSrc,a.progressbar=0,a.counter=0,a.getFile=function(e){a.progressbar=0,b.debug("source: "+a.uploadSrc),b.debug("getFile called ... "+e),d.readAsBinaryString(e,a).then(function(d){b.debug("reader called ... "+e),a.imageBfr=d,a.file=e;var f={filetype:a.file.type,filename:a.file.name,filebuffer:a.imageBfr};if("user"==a.uploadSrc)var g={user:{userid:c.usersession.currentUser.userid}};else if("org"==a.uploadSrc)var g={org:{userid:c.usersession.currentUser.userid,orgid:c.usersession.currentUser.org.orgid}};else if("product"==a.uploadSrc)var g={product:{userid:c.usersession.currentUser.userid,orgid:c.usersession.currentUser.org.orgid,prodle:a.product_prodle}};else if("productlogo"==a.uploadSrc)var g={productlogo:{userid:c.usersession.currentUser.userid,orgid:c.usersession.currentUser.org.orgid,prodle:a.product_prodle}};else if("orglogo"==a.uploadSrc)var g={orglogo:{userid:c.usersession.currentUser.userid,orgid:c.usersession.currentUser.org.orgid}};a.socket.emit("uploadFiles",f,g),b.debug("pic emitted")})},a.socket.removeAllListeners("productUploadResponse"),a.socket.on("productUploadResponse",function(c,d){c?("AP003"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):"AV001"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):(b.debug(c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)),b.debug("Error "+c)):(a.imageSrc=JSON.stringify(d),b.debug("getting response for product upload  "+a.imageSrc),a.counter++,b.debug(a.counter),a.counter<a.fileLength?b.debug("emitting image "+a.counter):a.counter=0)}),a.socket.removeAllListeners("productUploadLogoResponse"),a.socket.on("productUploadLogoResponse",function(c,d){c?("AP003"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):"AV001"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):(b.debug(c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)),b.debug("Error "+c)):(a.imageSrc=JSON.stringify(d),b.debug("getting response for logo upload  "+a.imageSrc),a.imageSrc=d,a.counter++,b.debug(a.counter),a.counter<a.fileLength?b.debug("emitting image "+a.counter):a.counter=0)}),a.socket.removeAllListeners("orgUploadsResponse"),a.socket.on("orgUploadResponse",function(c,d){c?("AP003"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):"AV001"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):(b.debug(c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)),b.debug("Error "+c)):(b.debug("getting response for org upload  "+d),a.imageSrc=d,a.counter++,b.debug(a.counter),a.counter<a.fileLength?b.debug("emitting image "+a.counter):a.counter=0)
}),a.socket.removeAllListeners("orgUploadLogoResponse"),a.socket.on("orgUploadLogoResponse",function(c,d){c?("AP003"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):"AV001"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):(b.debug(c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)),b.debug("Error "+c)):(b.debug("getting response for org upload logo "+d),a.imageSrc=d,a.counter++,b.debug(a.counter),a.counter<a.fileLength?b.debug("emitting image "+a.counter):a.counter=0)}),a.socket.removeAllListeners("userUploadResponse"),a.socket.on("userUploadResponse",function(c,d){c?("AP003"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):"AV001"==c.error.code?(b.debug(c.error.code+" "+c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)):(b.debug(c.error.message),a.showAlert("alert-danger","Error while uploading "+a.file.name+" "+c.error.message)),b.debug("Error "+c)):(b.debug("getting response for user upload  "+d),a.imageSrc=d,a.counter++,b.debug(a.counter),a.counter<a.fileLength?b.debug("emitting image "+a.counter):a.counter=0)}),a.$on("fileProgress",function(){})}]),angular.module("prodo.UploadApp").directive("ngFileSelect",["fileReader",function(){return{link:function(a,b){b.bind("change",function(b){a.file=(b.srcElement||b.target).files,a.fileLength=(b.srcElement||b.target).files,a.file=(b.srcElement||b.target).files,"user"==a.uploadSrc&&a.getFile(a.file[0]);for(var c=function(a){var b=document.createElement("label");b.type="label";var c=document.createTextNode("File "+a.name);b.appendChild(c),b.name="label",b.setAttribute("style","text-align:left");var d=document.getElementById("FileName");d.appendChild(b),d.style.width="400px";var e=document.createElement("div");e.className=" progress progress-info progress-striped active",e.id="a2"+a.name,e.style.textAlign="left",d.appendChild(e);var f=document.createElement("div");f.className="bar",f.id="bar";var g=document.getElementById("a2"+a.name);f.style.width="300px",g.appendChild(f);var h=setInterval(function(){var a=$(".bar");400==a.width()?(clearInterval(h),$(".progress").removeClass("active")):a.width(a.width()+40)},800);b="",c="",d="",e="",f="",h="",g=""},d=0;d<=a.file.length;d++)c(a.file[d]),a.getFile(a.file[d])})}}}]),function(a){var b=function(a){var b=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},c=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},d=function(a,b){return function(a){b.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},e=function(a,e){var f=new FileReader;return f.onload=b(f,a,e),f.onerror=c(f,a,e),f.onprogress=d(f,e),f},f=function(b,c){var d=a.defer(),f=e(d,c);return f.readAsBinaryString(b),d.promise};return{readAsBinaryString:f}};a.factory("fileReader",["$q","$log",b])}(angular.module("prodo.UploadApp")),angular.module("prodo.ProdoCommentApp").directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),angular.module("prodo.ProdoCommentApp").directive("commentLimit",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){if(a){if(a.length>f){var b=a.substring(0,f);return d.$setViewValue(b),d.$render(),b}return a}}var f=Number(c.commentLimit);d.$parsers.push(e)}}}),angular.module("prodo.CommonApp").controller("prodoUserProfileDataController",["$scope","$log","$rootScope","prodoCommentService","UserSessionService","$http",function(a,b,c,d){a.modaluser={},a.hello="hello",a.userProfileModal=function(b){d.searchUserData(b),console.log(b),a.$on("getUserDataNotDone",function(){})},a.$on("getUserDataDone",function(b,c){a.modaluser=c.success.user})}]),angular.module("prodo.ProdoCommentApp").factory("prodoCommentService",["$rootScope","$resource","$http","$state","$log",function(a,b,c,d,e){var f={Product:b("/api/profileinfo/:userid",{},{searchUser:{method:"GET",params:{userid:"@userid"}}})},g={};return g.searchUserData=function(b){f.Product.searchUser({userid:b},function(b){e.debug(b),a.$broadcast("getUserDataDone",b)}),function(b){e.debug(b),a.$broadcast("getUserDataNotDone",b)}},g}]),angular.module("prodo.ProdoWallApp").controller("prodoSearchController",["$scope","$log","$rootScope","prodoSearchService","UserSessionService","$http",function(a,b,c,d){a.TrendingProducts=[{productname:"Products Followed"},{productname:"Sony"},{productname:"Videocon"},{productname:"LG"},{productname:"Motorola"}],a.FollowedProducts=[{productname:"Samsung Galaxy 4"},{productname:"Samsung Note II"},{productname:"Samsung Washing Machine"},{productname:"Samsung LCD 32 inches"},{productname:"Samsung S4"}],a.products_id=[{key:"1",value:"Nokia Lumia 720"},{key:"2",value:"Samsung Galaxy Pro"},{key:"3",value:"Micromax Canvas"},{key:"4",value:"Micromax Canvas Doodle"},{key:"5",value:"HTC Pro"},{key:"6",value:"Apple Ipad"},{key:"7",value:"Nokia 6600"},{key:"8",value:"Videocone"},{key:"9",value:"Blackberry Boss "},{key:"10",value:"Sony"}],a.search={},a.searchProductData=function(){""!==a.product_name&&(a.search.Product_Name=a.product_name),""!==a.model_number&&(a.search.Model_number=a.model_number),""!==a.category&&(a.search.Category=a.category),""!==a.feature&&(a.search.Feature=a.feature),d.searchProduct(a.search),a.$on("getSearchProductDone",function(){}),a.$on("getSearchProductNotDone",function(){})},a.modalReset=function(){document.getElementById("textBoxCategoryName").value="",document.getElementById("textBoxModelNumber").value="",document.getElementById("textBoxFeatureName").value="",document.getElementById("textBoxProductName").value="",a.search={}},a.sampleDataEmitSearch=function(){var a={prodle:"xkdiPXcT_",orgid:"orgxkpxhIFau"};c.$emit("product",a),console.log("inside function"+a)}}]),angular.module("prodo.ProdoWallApp").factory("prodoSearchService",["$rootScope","$resource","$http","$state","$log",function(a,b,c,d,e){var f={Product:b("/api/searchproduct",{},{searchProductByKey:{method:"POST"}})},g={};return g.searchProduct=function(b){f.Product.searchProductByKey(b,function(b){e.debug(b),a.$broadcast("getSearchProductDone",b)}),function(b){e.debug(b),a.$broadcast("getSearchProductNotDone",b)}},g}]);